<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <style>
    body{ margin:0; background:#fff; }
    nav{ background:#fff; box-shadow:none; border-bottom:2px solid #f8c4d8; }
    .nav-wrapper{ display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:8px; }
    .brand-logo{ position:static; display:flex; align-items:center; }
    .brand-logo img{ height:55px; margin-top:5px; }
    .btn-pink{ background:#f8c4d8; border-radius:20px; color:#333; font-weight:800; }
    ul.right{ position:static; display:flex; align-items:center; gap:10px; margin:0; margin-left:auto; }
    ul a{ font-weight:700; color:#2d5fa4 !important; }
    .sidenav-trigger{ color:#2d5fa4; }

    /*  Bot贸n pastel */
    .music-btn{
    background:#fce4ec;
    color:#2d5fa4;
    width:40px;
    height:40px;
    border-radius:50%;

    display:flex;
    align-items:center;
    justify-content:center;

    margin-left:1px;

    position:relative;
    top:13px;   /*  ajusta fino vertical */
    }

    .music-btn:hover{
    background:#f8c4d8;
    transform:scale(1.1);
    }

    @media (max-width: 600px){
      .nav-wrapper{ position:relative; min-height:64px; }
      .sidenav-trigger{ position:absolute; left:0; top:50%; transform:translateY(-50%); z-index:2; }
      .brand-logo{
        position:absolute;
        right:8px;
        top:50%;
        transform:translateY(-50%);
        width:auto;
        justify-content:flex-end;
        pointer-events:auto;
        z-index:1;
      }
      .brand-logo img{ height:40px; margin-top:0; }
      ul.right{ display:none; }
      .music-btn{ width:34px; height:34px; top:0; }
    }
  </style>
</head>
<body>
  <!--  AUDIO -->
  <audio id="bgMusic" preload="auto" loop>
    <source src="../assets/numberbeast.mp3" type="audio/mpeg">
  </audio>
  <nav>
    <div class="nav-wrapper container">
      <a href="#!" data-target="mobile-nav" class="sidenav-trigger left">
        <i class="material-icons">menu</i>
      </a>
      <a href="../index.html" target="_parent" class="brand-logo">
        <img src="../assets/logo-peticiosos.jpg" alt="Peticiosos">
      </a>

      <ul class="right">
        <li><a href="../index.html#productos" target="_parent">Productos</a></li>
        <li><a href="../index.html#nosotros" target="_parent">Nosotros</a></li>
        <li><a href="../index.html#contacto" class="btn btn-pink" target="_parent">CONTACTO</a></li>
        <!--  Bot贸n M煤sica -->
        <li>
          <a id="musicBtn" class="btn music-btn">
            <i class="material-icons">pause_circle_filled</i>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <ul class="sidenav" id="mobile-nav">
    <li><a href="../index.html#productos" target="_parent">Productos</a></li>
    <li><a href="../index.html#nosotros" target="_parent">Nosotros</a></li>
    <li><a href="../index.html#contacto" target="_parent">Contacto</a></li>
    <li><a id="musicBtnMobile">M煤sica</a></li>
  </ul>

 <script>
    document.addEventListener("DOMContentLoaded", function(){
      if (window.M && M.Sidenav) {
        const el = document.getElementById("mobile-nav");
        if (el) M.Sidenav.init(el, { edge: "left" });
      }

      const audio = document.getElementById("bgMusic");
      const btn = document.getElementById("musicBtn");
      const btnMobile = document.getElementById("musicBtnMobile");

      audio.volume = 0.30; //  volumen suave 15%

      //  Intentar autoplay
      audio.play().then(()=>{
        // Si funciona autoplay
        btn.innerHTML = '<i class="material-icons">pause_circle_filled</i>';
      }).catch(()=>{
        // Si navegador bloquea, cambiar bot贸n a Play
        btn.innerHTML = '<i class="material-icons">play_circle_filled</i>';

        // Reproducir en primer click del usuario
        const startMusic = () => {
          audio.play().catch(()=>{});
          btn.innerHTML = '<i class="material-icons">pause_circle_filled</i>';
          document.removeEventListener("click", startMusic);
        };

        document.addEventListener("click", startMusic);
      });

      //  Bot贸n manual
      btn.addEventListener("click", function(e){
        e.stopPropagation();

        if(audio.paused){
          audio.play();
          btn.innerHTML = '<i class="material-icons">play_circle_filled</i>';
        }else{
          audio.pause();
          btn.innerHTML = '<i class="material-icons">pause_circle_filled</i>';
        }
      });

      if (btnMobile) {
        btnMobile.addEventListener("click", function(e){
          e.preventDefault();
          if(audio.paused){
            audio.play();
            btn.innerHTML = '<i class="material-icons">play_circle_filled</i>';
          }else{
            audio.pause();
            btn.innerHTML = '<i class="material-icons">pause_circle_filled</i>';
          }
        });
      }

    });
  </script>

</body>
</html>
